# ITPE Topic Enhancement - Production Environment Configuration
# Copy this file to .env.production and update values
#
# 보안 경고:
# - 절대 이 파일을 버전 관리 시스템에 커밋하지 마세요
# - 모든 비밀번호는 강력한 값을 사용하세요 (최소 32자 권장)
# - 비밀번호 생성: python -c "import secrets; print(secrets.token_urlsafe(32))"

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=ITPE Topic Enhancement
APP_VERSION=1.0.0
DEBUG=false

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
# PostgreSQL connection URL for asyncpg driver
# 환경변수 참조: POSTGRES_PASSWORD를 사용합니다
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}

# PostgreSQL configuration for docker-compose
POSTGRES_DB=itpe
POSTGRES_USER=itpe
# 강력한 비밀번호 생성 (32자 이상 권장)
# 명령: python -c "import secrets; print(secrets.token_urlsafe(32))"
POSTGRES_PASSWORD=GENERATE_STRONG_PASSWORD_HERE_MIN_32_CHARS

# =============================================================================
# Redis
# =============================================================================
# Redis connection URL with password
# 환경변수 참조: REDIS_PASSWORD를 사용합니다
REDIS_URL=redis://:${REDIS_PASSWORD}@localhost:6379/0

# Redis configuration for docker-compose
# PostgreSQL과 다른 강력한 비밀번호 사용 권장
REDIS_PASSWORD=GENERATE_STRONG_PASSWORD_HERE_MIN_32_CHARS

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://staging.example.com,https://app.example.com

# =============================================================================
# LLM Configuration
# =============================================================================
# OpenAI Configuration (required for OpenAI provider)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o

# Ollama Configuration (required for Ollama provider)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1:8b

# LLM Provider Selection: openai or ollama
LLM_PROVIDER=openai
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=1000

# =============================================================================
# Celery Configuration
# =============================================================================
# 환경변수 참조: REDIS_PASSWORD를 사용합니다
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@localhost:6379/0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@localhost:6379/1

# =============================================================================
# Cache Configuration
# =============================================================================
CACHE_ENABLED=true
CACHE_BACKEND=redis
CACHE_TTL_EMBEDDING=604800
CACHE_TTL_VALIDATION=3600
CACHE_TTL_LLM=86400

# =============================================================================
# ChromaDB Configuration
# =============================================================================
CHROMADB_PATH=/app/data/chromadb
CHROMADB_COLLECTION=references

# =============================================================================
# Obsidian Configuration
# =============================================================================
OBSIDIAN_VAULT_PATH=/data/obsidian/vault
OBSIDIAN_EXPORT_PATH=/data/obsidian/export

# =============================================================================
# Reference Sources Configuration
# =============================================================================
FB21_BOOKS_PATH=/data/fb21-books

# =============================================================================
# Embedding Configuration
# =============================================================================
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MPNet-base-v2
EMBEDDING_DEVICE=cpu
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DIMENSION=768

# =============================================================================
# Matching Configuration
# =============================================================================
# Similarity thresholds
SIMILARITY_THRESHOLD=0.7
SIMILARITY_THRESHOLD_PDF_BOOK=0.65
SIMILARITY_THRESHOLD_BLOG=0.6
SIMILARITY_THRESHOLD_MARKDOWN=0.7
TOP_K_REFERENCES=5

# Field weights for embedding
FIELD_WEIGHT_DEFINITION=0.35
FIELD_WEIGHT_LEAD=0.25
FIELD_WEIGHT_KEYWORDS=0.25
FIELD_WEIGHT_HASHTAGS=0.10
FIELD_WEIGHT_MEMORY=0.05

# Trust score integration
TRUST_SCORE_PDF_BOOK=1.0
TRUST_SCORE_BLOG=0.8
TRUST_SCORE_MARKDOWN=0.6
TRUST_SCORE_WEIGHT=0.3
BASE_SIMILARITY_WEIGHT=0.7

# Document chunking
CHUNK_SIZE_THRESHOLD=5000
CHUNK_OVERLAP=500

# =============================================================================
# Validation Configuration
# =============================================================================
VALIDATION_RULES_PATH=/app/config/validation_rules.yaml

# =============================================================================
# Frontend Configuration (for Vite build)
# =============================================================================
VITE_API_BASE_URL=http://localhost:8000/api/v1

# =============================================================================
# Security Configuration
# =============================================================================
# API Key for authentication (generate a strong random key)
API_KEY_HEADER=X-API-Key
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=your_generated_api_key_here

# =============================================================================
# Monitoring & Logging
# =============================================================================
# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
STRUCTURED_LOGGING=true
